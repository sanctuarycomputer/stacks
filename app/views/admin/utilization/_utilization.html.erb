<% if no_studio.present? %>
  <h3>ℹ️ The following people don't have a studio assigned in Harvest Forecast:</h3>
  <table border="0" cellspacing="0" cellpadding="0" id="index_table_invoice_passes" class="index_table index" paginator="true">
    <thead>
      <tr>
        <th class="col">Email</th>
      </tr>
    </thead>
    <tbody>
      <% no_studio.each_with_index do |email, index| %>
        <tr class="<%= index.even? ? "even" : "odd" %>">
          <td class="col"><%= email %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>


<div class="dashboard-modules table index_table index">
  <div class="dashboard-module">
    <div class="module-header">
      <p>Utilization Data</p>

      <p>
        <a href="?studio=garden3d" class="<%= (params["studio"] == "garden3d" || params["studio"] == nil) ? "underline" : "" %>">
        garden3d
        </a>
      </p>
      <p>
        <a href="?studio=xxix" class="<%= params["studio"] == "xxix" ? "underline" : "" %>">
          XXIX
        </a>
      </p>
      <p>
        <a href="?studio=hydro" class="<%= params["studio"] == "hydro" ? "underline" : "" %>">
          Manhattan Hydraulics
        </a>
      </p>
      <p>
        <a href="?studio=sanctu" class="<%= params["studio"] == "sanctu" ? "underline" : "" %>">
          Sanctuary Computer
        </a>
      </p>

    </div>
    <div class="module-body">
      <canvas id="hourly-data"></canvas>
    </div>
  </div>
</div>

<script>
  new Chart(document.getElementById('hourly-data'), {
    type: 'line',
    data: <%= hourly_data.to_json.html_safe %>,
    options: {
      tension: 0.3,
      scales: {
        y: {
          type: 'linear',
          display: true,
          position: 'left',
          beginAtZero: true
        },
        y1: {
          type: 'linear',
          display: true,
          position: 'right',
          beginAtZero: true,
          stacked: true,
          grid: {
            drawOnChartArea: false, // only want the grid lines for one axis to show up
          },
        }
      }
    }
  })
</script>
